<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Data Preparation | Start with PoissonERM: Automate the Binary-Endpoint ER model via Poisson Regression</title>
  <meta name="description" content="Chapter 4 Data Preparation | Start with PoissonERM: Automate the Binary-Endpoint ER model via Poisson Regression" />
  <meta name="generator" content="bookdown 0.36 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Data Preparation | Start with PoissonERM: Automate the Binary-Endpoint ER model via Poisson Regression" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Data Preparation | Start with PoissonERM: Automate the Binary-Endpoint ER model via Poisson Regression" />
  
  
  

<meta name="author" content="Yuchen Wang, Ph.D., Pfizer Inc" />
<meta name="author" content="Luke Fostvedt, Ph.D., Pfizer Inc" />


<meta name="date" content="2023-11-10" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="usage.html"/>
<link rel="next" href="control-script-for-modeling-user-input.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Package-like Tool: PoissonERM</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="quick-start-with-an-example.html"><a href="quick-start-with-an-example.html"><i class="fa fa-check"></i><b>2</b> Quick Start with an Example</a></li>
<li class="chapter" data-level="3" data-path="usage.html"><a href="usage.html"><i class="fa fa-check"></i><b>3</b> Usage</a>
<ul>
<li class="chapter" data-level="3.1" data-path="usage.html"><a href="usage.html#statistical-analysis-modelpoisson"><i class="fa fa-check"></i><b>3.1</b> Statistical Analysis: <code>ModelPoisson()</code></a></li>
<li class="chapter" data-level="3.2" data-path="usage.html"><a href="usage.html#new-predictions-predictionpoisson"><i class="fa fa-check"></i><b>3.2</b> New Predictions <code>PredictionPoisson()</code></a></li>
<li class="chapter" data-level="3.3" data-path="usage.html"><a href="usage.html#report-generation-reportpoisson"><i class="fa fa-check"></i><b>3.3</b> Report Generation: <code>ReportPoisson()</code></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-preparation.html"><a href="data-preparation.html"><i class="fa fa-check"></i><b>4</b> Data Preparation</a>
<ul>
<li class="chapter" data-level="4.1" data-path="data-preparation.html"><a href="data-preparation.html#data-set-for-modeling"><i class="fa fa-check"></i><b>4.1</b> Data Set for Modeling</a></li>
<li class="chapter" data-level="4.2" data-path="data-preparation.html"><a href="data-preparation.html#new-exposure-data-set-for-prediction"><i class="fa fa-check"></i><b>4.2</b> New Exposure Data Set for Prediction</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="control-script-for-modeling-user-input.html"><a href="control-script-for-modeling-user-input.html"><i class="fa fa-check"></i><b>5</b> Control Script for Modeling: <code>user-input.r</code></a>
<ul>
<li class="chapter" data-level="5.1" data-path="control-script-for-modeling-user-input.html"><a href="control-script-for-modeling-user-input.html#data-set"><i class="fa fa-check"></i><b>5.1</b> Data set</a></li>
<li class="chapter" data-level="5.2" data-path="control-script-for-modeling-user-input.html"><a href="control-script-for-modeling-user-input.html#unique-patient-identifier"><i class="fa fa-check"></i><b>5.2</b> Unique Patient Identifier</a></li>
<li class="chapter" data-level="5.3" data-path="control-script-for-modeling-user-input.html"><a href="control-script-for-modeling-user-input.html#time"><i class="fa fa-check"></i><b>5.3</b> Time</a></li>
<li class="chapter" data-level="5.4" data-path="control-script-for-modeling-user-input.html"><a href="control-script-for-modeling-user-input.html#endpoints-to-be-analysed"><i class="fa fa-check"></i><b>5.4</b> Endpoints to be analysed</a></li>
<li class="chapter" data-level="5.5" data-path="control-script-for-modeling-user-input.html"><a href="control-script-for-modeling-user-input.html#event-sub-type-column-and-set-up-optional."><i class="fa fa-check"></i><b>5.5</b> Event Sub-Type Column and Set up (optional).</a></li>
<li class="chapter" data-level="5.6" data-path="control-script-for-modeling-user-input.html"><a href="control-script-for-modeling-user-input.html#grade-column-and-set-up-optional."><i class="fa fa-check"></i><b>5.6</b> Grade column and Set up (optional).</a></li>
<li class="chapter" data-level="5.7" data-path="control-script-for-modeling-user-input.html"><a href="control-script-for-modeling-user-input.html#exposure-metrics"><i class="fa fa-check"></i><b>5.7</b> Exposure Metrics</a></li>
<li class="chapter" data-level="5.8" data-path="control-script-for-modeling-user-input.html"><a href="control-script-for-modeling-user-input.html#categorical-covariates"><i class="fa fa-check"></i><b>5.8</b> Categorical Covariates</a></li>
<li class="chapter" data-level="5.9" data-path="control-script-for-modeling-user-input.html"><a href="control-script-for-modeling-user-input.html#continuous-covariates"><i class="fa fa-check"></i><b>5.9</b> Continuous Covariates</a></li>
<li class="chapter" data-level="5.10" data-path="control-script-for-modeling-user-input.html"><a href="control-script-for-modeling-user-input.html#reference-value-for-continuous-covariates"><i class="fa fa-check"></i><b>5.10</b> Reference Value for Continuous Covariates</a></li>
<li class="chapter" data-level="5.11" data-path="control-script-for-modeling-user-input.html"><a href="control-script-for-modeling-user-input.html#other-options"><i class="fa fa-check"></i><b>5.11</b> Other Options</a>
<ul>
<li class="chapter" data-level="5.11.1" data-path="control-script-for-modeling-user-input.html"><a href="control-script-for-modeling-user-input.html#demographic-summary-by-variable"><i class="fa fa-check"></i><b>5.11.1</b> Demographic Summary-by Variable</a></li>
<li class="chapter" data-level="5.11.2" data-path="control-script-for-modeling-user-input.html"><a href="control-script-for-modeling-user-input.html#additional-columns-to-include-in-modeling-dataset"><i class="fa fa-check"></i><b>5.11.2</b> Additional Columns to Include In Modeling Dataset</a></li>
<li class="chapter" data-level="5.11.3" data-path="control-script-for-modeling-user-input.html"><a href="control-script-for-modeling-user-input.html#threshold-for-incidence-rate"><i class="fa fa-check"></i><b>5.11.3</b> Threshold(%) for Incidence Rate</a></li>
<li class="chapter" data-level="5.11.4" data-path="control-script-for-modeling-user-input.html"><a href="control-script-for-modeling-user-input.html#exposure-metric-selection-criteria"><i class="fa fa-check"></i><b>5.11.4</b> Exposure Metric Selection Criteria</a></li>
<li class="chapter" data-level="5.11.5" data-path="control-script-for-modeling-user-input.html"><a href="control-script-for-modeling-user-input.html#covariates-search"><i class="fa fa-check"></i><b>5.11.5</b> Covariates Search</a></li>
<li class="chapter" data-level="5.11.6" data-path="control-script-for-modeling-user-input.html"><a href="control-script-for-modeling-user-input.html#backwards-deletion-criteria"><i class="fa fa-check"></i><b>5.11.6</b> Backwards Deletion Criteria</a></li>
<li class="chapter" data-level="5.11.7" data-path="control-script-for-modeling-user-input.html"><a href="control-script-for-modeling-user-input.html#exposure-metrics-and-continuous-covariates-scales"><i class="fa fa-check"></i><b>5.11.7</b> Exposure Metrics and Continuous Covariates Scales</a></li>
<li class="chapter" data-level="5.11.8" data-path="control-script-for-modeling-user-input.html"><a href="control-script-for-modeling-user-input.html#odds-ratio-results"><i class="fa fa-check"></i><b>5.11.8</b> Odds-Ratio Results</a></li>
<li class="chapter" data-level="5.11.9" data-path="control-script-for-modeling-user-input.html"><a href="control-script-for-modeling-user-input.html#saved-table-format"><i class="fa fa-check"></i><b>5.11.9</b> Saved table format</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="prediction-control-script-prediction-user-input-sim.html"><a href="prediction-control-script-prediction-user-input-sim.html"><i class="fa fa-check"></i><b>6</b> Prediction Control Script <code>prediction-user-input-sim.r</code></a>
<ul>
<li class="chapter" data-level="6.1" data-path="prediction-control-script-prediction-user-input-sim.html"><a href="prediction-control-script-prediction-user-input-sim.html#bins-of-observed-exposure-values"><i class="fa fa-check"></i><b>6.1</b> Bins of Observed Exposure Values</a></li>
<li class="chapter" data-level="6.2" data-path="prediction-control-script-prediction-user-input-sim.html"><a href="prediction-control-script-prediction-user-input-sim.html#simulated-exposure-data-set"><i class="fa fa-check"></i><b>6.2</b> Simulated Exposure Data Set</a></li>
<li class="chapter" data-level="6.3" data-path="prediction-control-script-prediction-user-input-sim.html"><a href="prediction-control-script-prediction-user-input-sim.html#new-exposure-summary-metric"><i class="fa fa-check"></i><b>6.3</b> New Exposure Summary Metric</a></li>
<li class="chapter" data-level="6.4" data-path="prediction-control-script-prediction-user-input-sim.html"><a href="prediction-control-script-prediction-user-input-sim.html#group-label-variable"><i class="fa fa-check"></i><b>6.4</b> Group Label Variable</a></li>
<li class="chapter" data-level="6.5" data-path="prediction-control-script-prediction-user-input-sim.html"><a href="prediction-control-script-prediction-user-input-sim.html#filter-condition-optional"><i class="fa fa-check"></i><b>6.5</b> Filter Condition (Optional)</a></li>
<li class="chapter" data-level="6.6" data-path="prediction-control-script-prediction-user-input-sim.html"><a href="prediction-control-script-prediction-user-input-sim.html#caption-for-simulated-exposure-data"><i class="fa fa-check"></i><b>6.6</b> Caption for Simulated Exposure Data</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="example-adjusting-output.html"><a href="example-adjusting-output.html"><i class="fa fa-check"></i><b>7</b> Example Adjusting Output</a>
<ul>
<li class="chapter" data-level="7.1" data-path="example-adjusting-output.html"><a href="example-adjusting-output.html#demographic-summary-tables"><i class="fa fa-check"></i><b>7.1</b> Demographic Summary Tables</a></li>
<li class="chapter" data-level="7.2" data-path="example-adjusting-output.html"><a href="example-adjusting-output.html#use-different-exposure-metrics-in-different-endpoints"><i class="fa fa-check"></i><b>7.2</b> Use different Exposure Metrics in different Endpoints</a></li>
<li class="chapter" data-level="7.3" data-path="example-adjusting-output.html"><a href="example-adjusting-output.html#threshold-for-incidence-rate-1"><i class="fa fa-check"></i><b>7.3</b> Threshold(%) for Incidence Rate</a></li>
<li class="chapter" data-level="7.4" data-path="example-adjusting-output.html"><a href="example-adjusting-output.html#exposure-and-model-selection-criteria"><i class="fa fa-check"></i><b>7.4</b> Exposure and Model Selection Criteria</a></li>
<li class="chapter" data-level="7.5" data-path="example-adjusting-output.html"><a href="example-adjusting-output.html#scale-of-exposure-metrics"><i class="fa fa-check"></i><b>7.5</b> Scale of Exposure Metrics</a></li>
<li class="chapter" data-level="7.6" data-path="example-adjusting-output.html"><a href="example-adjusting-output.html#covariates-search-1"><i class="fa fa-check"></i><b>7.6</b> Covariates Search</a></li>
<li class="chapter" data-level="7.7" data-path="example-adjusting-output.html"><a href="example-adjusting-output.html#summary-only-covariates"><i class="fa fa-check"></i><b>7.7</b> Summary-only Covariates</a></li>
<li class="chapter" data-level="7.8" data-path="example-adjusting-output.html"><a href="example-adjusting-output.html#reference-value-for-continuous-covariates-1"><i class="fa fa-check"></i><b>7.8</b> Reference value for Continuous Covariates</a></li>
<li class="chapter" data-level="7.9" data-path="example-adjusting-output.html"><a href="example-adjusting-output.html#save-all-tables-as-.tsv-files-instead-of-.tex-files"><i class="fa fa-check"></i><b>7.9</b> Save all tables as .tsv files instead of .tex files</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="tips-for-users.html"><a href="tips-for-users.html"><i class="fa fa-check"></i><b>8</b> Tips for Users</a></li>
<li class="chapter" data-level="9" data-path="acknowledgements.html"><a href="acknowledgements.html"><i class="fa fa-check"></i><b>9</b> Acknowledgements</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Start with PoissonERM: Automate the Binary-Endpoint ER model via Poisson Regression</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-preparation" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">Chapter 4</span> Data Preparation<a href="data-preparation.html#data-preparation" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="data-set-for-modeling" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Data Set for Modeling<a href="data-preparation.html#data-set-for-modeling" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><code>PoissonERM</code> is designed for implementing standard binary-endpoint E-R analysis on multiple endpoints. The data set must include:</p>
<ul>
<li>A column of “<strong>C</strong>,” where any non-NA value indicates dropping the row and NA value indicates including the row in modeling;</li>
<li>One column of unique <strong>Subject ID</strong> where the same ID indicates the same subject;</li>
<li>One column of <strong>Outcome</strong> where 0 indicates “not observed with event” and 1 indicates “observed with event”;</li>
<li>One column of <strong>Event Type</strong> (even there is only one endpoint), values could be numeric or characters;</li>
<li>One column of <strong>Time</strong> in days;</li>
<li>Columns of <strong>Exposure Metrics</strong> in original scale (as many as needed);</li>
<li>Columns of <strong>Covariates</strong> (as many as needed) if covariates search or demographic summary is requested;</li>
<li>One column of <strong>Demographic-group-by</strong> variable, which could be one of the covariates or a new variable.</li>
</ul>
<p>The following is optional:
- One column of <strong>Event Sub-Type</strong>, providing more detailed categories for “Yes” and “No” in each endpoint;
- One column of <strong>Grade</strong> if the endpoints are related to Grades such as “<span class="math inline">\(\le \text{Grade} 2\)</span>.”</p>
<p>Below is a subset of obsdata.csv in the example:</p>
<table>
<thead>
<tr class="header">
<th align="right">PROT</th>
<th align="right">ID</th>
<th align="right">SEX</th>
<th align="right">RACE</th>
<th align="right">LOCATION</th>
<th align="right">AGE</th>
<th align="right">BWT</th>
<th align="right">TIME</th>
<th align="right">CAVE1</th>
<th align="right">CAVE2</th>
<th align="right">FLAG</th>
<th align="right">DV</th>
<th align="right">SUB</th>
<th align="left">C</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">2</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="right">2</td>
<td align="right">55</td>
<td align="right">64</td>
<td align="right">57</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">26</td>
<td align="right">88</td>
<td align="right">193</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="right">3</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">50</td>
<td align="right">55</td>
<td align="right">191</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">4</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">40</td>
<td align="right">53</td>
<td align="right">317</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="right">4</td>
<td align="right">1</td>
<td align="right">39</td>
<td align="right">76</td>
<td align="right">199</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="right">6</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">55</td>
<td align="right">68</td>
<td align="right">111</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="right">2</td>
<td align="right">55</td>
<td align="right">64</td>
<td align="right">57</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">26</td>
<td align="right">88</td>
<td align="right">193</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">6</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="right">3</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">50</td>
<td align="right">55</td>
<td align="right">191</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">5</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">4</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">40</td>
<td align="right">53</td>
<td align="right">317</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">6</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="right">4</td>
<td align="right">1</td>
<td align="right">39</td>
<td align="right">76</td>
<td align="right">199</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">5</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="right">6</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">55</td>
<td align="right">68</td>
<td align="right">111</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
<p>In this example,</p>
<ul>
<li>“PROT” is the “Demographic-summary-by” column.</li>
<li>“ID” is the “subject ID” column, ”DV" is the “Outcome” column.</li>
<li>“Time” is the “Time” column in days.</li>
<li>“FLAG” is the “Event Type” column.</li>
<li>“SUB” is the “Event Sub-Type,” where the same value with different Event Type values means different event sub-type (nested within the Event Type).</li>
<li>“SEX,” “RACE,” “LOCATION,” “AGE,” “BWT” are the “covariates” columns. The level values in categorical variables are coded in numbers, and the actual Labels can be provided by user in the control script.</li>
<li>“CAVE1” and “CAVE2” are the “Exposure Metric” columns. 0 values will be replaced by 0.0001 while calculating the log-scale.</li>
</ul>
</div>
<div id="new-exposure-data-set-for-prediction" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> New Exposure Data Set for Prediction<a href="data-preparation.html#new-exposure-data-set-for-prediction" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The new exposure data set need to contain</p>
<ul>
<li>A column of <strong>Group Label</strong> for summarizing the result;</li>
<li>Columns of simulated <strong>New Exposure Metrics</strong>.</li>
</ul>
<p>The data set could contain any other columns.</p>
<p>Below is a subset of the simulated new exposures simdata.csv in the example:</p>
<table>
<thead>
<tr class="header">
<th align="left">GROUP</th>
<th align="right">CAVE1</th>
<th align="right">CAVE2</th>
<th align="right">C</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">100 mg QD</td>
<td align="right">48.26489</td>
<td align="right">60.89629</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">100 mg QD</td>
<td align="right">172.61230</td>
<td align="right">87.19719</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">100 mg QD</td>
<td align="right">58.98776</td>
<td align="right">85.84614</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">100 mg QD</td>
<td align="right">56.19063</td>
<td align="right">109.53101</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">100 mg QD</td>
<td align="right">104.41777</td>
<td align="right">83.96203</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">100 mg QD</td>
<td align="right">283.81537</td>
<td align="right">75.03528</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">50 mg QD</td>
<td align="right">48.47262</td>
<td align="right">124.34171</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">50 mg QD</td>
<td align="right">32.14167</td>
<td align="right">43.52486</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">50 mg QD</td>
<td align="right">22.93323</td>
<td align="right">33.95415</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">50 mg QD</td>
<td align="right">87.91701</td>
<td align="right">47.09609</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">50 mg QD</td>
<td align="right">57.66175</td>
<td align="right">41.51849</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">50 mg QD</td>
<td align="right">42.05427</td>
<td align="right">46.84531</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">30 mg QD</td>
<td align="right">28.30073</td>
<td align="right">16.79537</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">30 mg QD</td>
<td align="right">28.31021</td>
<td align="right">30.03572</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">30 mg QD</td>
<td align="right">37.09448</td>
<td align="right">35.19235</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">30 mg QD</td>
<td align="right">34.85409</td>
<td align="right">44.31023</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">30 mg QD</td>
<td align="right">17.25611</td>
<td align="right">20.07292</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">30 mg QD</td>
<td align="right">20.40230</td>
<td align="right">23.39462</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p>In this example, each group has 2500 simulated exposures. In practice, the simulated exposures should be a value corresponding to 52 weeks/1 year of the treatment. For the columns in this example:</p>
<ul>
<li>“GROUP” is the “Group Label” column. It could be coded in numbers or characters. Levels and Labels can be specified by user in the control script.</li>
<li>“CAVE1” and “CAVE2” are the simulated “New Exposures Metrics.” The exposure column names are not required to be the same as the modeling data set. User can provide the correspondence in the control script.</li>
<li>“C” is the additional column for filtering the data set. All 100 mg QD rows are with C = 1. User may hide/only show the 100 mg QD group in the prediction result without modifying data set outside.</li>
</ul>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="usage.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="control-script-for-modeling-user-input.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/index.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
